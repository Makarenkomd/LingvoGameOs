@model List<Game>

@{
    ViewData["Title"] = "Главная";
}

<div style="background-image: url('/img/mainBG.png'); background-size: cover; background-position: center; background-repeat: no-repeat;">
    <section class="game-hero" data-page-id="home">
        <div class="game-hero__text">
            <h1 class="game-hero__main-title">Осетинский язык ближе, чем ты думаешь</h1>
            <p class="game-hero__main-description">
                Учи осетинский язык через увлекательные игры для любого возраста и уровня. Погружайся в слова, грамматику и культуру Осетии!
            </p>
            <div class="game-hero__actions">
                <a href="#games" class="game-hero__button profile__button">
                    <img src="/icon/play.svg" alt="Play" class="game-hero__play-icon" /> Исследовать игры
                </a>
                <a href="/register" class="game-hero__button game-hero__button--secondary">Присоединиться</a>
            </div>
        </div>
    </section>

    <!-- Секция CTA -->
    <section class="cta">
        <h2 class="cta__title">Создай игру для осетинского языка!</h2>
        <p class="cta__description">
            Присоединяйся к сообществу разработчиков и создавай игры для сохранения языка.
        </p>
        <a asp-controller="Upload" asp-action="Index" class="cta__button">Загрузить игру</a>
    </section>
</div>

<!-- Секция категорий -->
<section class="categories">
    <div class="categories__container">
        <div class="categories__text">
            <h2 class="categories__title">Выбери игру по интересам</h2>
            <p class="categories__description">
                Исследуй категории, чтобы найти идеальную игру для изучения осетинского языка.
            </p>
        </div>
        <div class="categories__controls">
            <button class="carousel-control categories__prev">
                <img src="/icon/prev.svg" alt="Назад" />
            </button>
            <span class="carousel-page-counter"></span>
            <button class="carousel-control categories__next">
                <img src="/icon/next.svg" alt="Вперед" />
            </button>
        </div>
    </div>
    <div class="categories__carousel">
        <div class="categories__list">
            @foreach (var category in new[] { 
                new { Title = "Культура", Icons = new[] { "/img/category-culture-1.png", "/img/category-culture-2.png" }, Icon = "/icon/culture.svg" },
                new { Title = "Чтение", Icons = new[] { "/img/category-reading-1.png", "/img/category-reading-2.png" }, Icon = "/icon/reading.svg" },
                new { Title = "Словарный запас", Icons = new[] { "/img/category-vocab-1.png", "/img/category-vocab-2.png" }, Icon = "/icon/vocab.svg" },
                new { Title = "Грамматика", Icons = new[] { "/img/category-grammar-1.png", "/img/category-grammar-2.png" }, Icon = "/icon/grammar.svg" }
            })
            {
                <div class="categories__item">
                    <div class="category-card">
                        <div class="category-card__images">
                            <img src="@category.Icons[0]" alt="@category.Title" class="category-card__image" />
                            <img src="@category.Icons[1]" alt="@category.Title" class="category-card__image" />
                        </div>
                        <div class="category-card__info">
                            <h3 class="category-card__title">@category.Title</h3>
                            <img src="@category.Icon" alt="Иконка @category.Title" class="category-card__icon" />
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Секция популярных игр -->
<section class="games" id="games">
    <div class="games__header">
        <div class="games__text">
            <h2 class="games__title">Популярные игры</h2>
            <p class="games__description">Найди лучшую игру для изучения осетинского языка!</p>
        </div>
        <div class="games__controls">
            <button class="carousel-control games__prev">
                <img src="/icon/prev.svg" alt="Назад" />
            </button>
            <span class="carousel-page-counter"></span>
            <button class="carousel-control games__next">
                <img src="/icon/next.svg" alt="Вперед" />
            </button>
        </div>
    </div>
    

    <section class="games">

        <div class="games__list" id="all-games">
            @if (Model != null && Model.Any())
            {
                @foreach (var game in Model)
                {
                    <div class="games__item"
                        data-rating="@game.RaitingPlayers">
                        <img class="games__image" src="@game.CoverImagePath" alt="@game.Title">
                        <div class="games__content">
                            <h3 class="games__name">@game.Title</h3>
                            <div class="games__stats">
                                <span class="games__rating">
                                    <img src="/icon/star.svg" alt="star" class="rating-star filled">
                                    <img src="/icon/star.svg" alt="star" class="rating-star filled">
                                    <img src="/icon/star.svg" alt="star" class="rating-star filled">
                                    <img src="/icon/star.svg" alt="star" class="rating-star filled">
                                    <img src="/icon/star.svg" alt="star" class="rating-star filled"> @game.RaitingPlayers
                                </span>
                                <span class="games__likes">
                                    <img src="/icon/like2.svg" alt="like" class="stat-icon favorite-toggle"> 120
                                </span>
                                <span class="games__views">
                                    <img src="/icon/eye.svg" alt="view" class="stat-icon"> @game.NumberDownloads
                                </span>
                            </div>
                            <div class="games__actions">
                                @if (game.GamePlatform.Name == "Desktop")
                                {
                                    <a href="@game.GameURL" download role="button" class="games__button">Скачать</a>
                                }
                                else
                                {
                                    <a asp-controller="Game" asp-action="Start" asp-route-idGame="@game.Id" class="games__button">Играть</a>
                                }
                                <a asp-controller="Game" asp-action="Details" asp-route-idGame="@game.Id" role="button" class="games__preview button">Подробнее</a>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </section>
    <a href="/games" class="games__view-all user-added-games__button">Показать все</a>
</section>

<!-- Отзывы -->
<section class="game-reviews">
    <div class="game-reviews__header">
        <h2 class="game-reviews__title">Отзывы</h2>
        <button class="game-reviews__button profile__button">
            <img src="/icon/write.svg" alt="Write" class="game-reviews__icon"> Написать отзыв
        </button>
    </div>
    <div class="game-reviews__container">
        <article class="game-reviews__card">
            <div class="game-reviews__reviewer">
                <img src="/img/avatar.png" alt="Reviewer" class="game-reviews__avatar">
                <div class="game-reviews__reviewer-details">
                    <span class="game-reviews__reviewer-name">Viezh Robert</span>
                    <span class="game-reviews__reviewer-location">Warsaw, Poland</span>
                </div>
                <div class="game-reviews__rating">
                    <span class="game-reviews__rating-score">4.5</span>
                    <img src="/icon/star-filled.svg" alt="Star" class="game-reviews__star">
                </div>
            </div>
            <p class="game-reviews__text">
                Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            </p>
        </article>
        <article class="game-reviews__card">
            <div class="game-reviews__reviewer">
                <img src="/img/avatar.png" alt="Reviewer" class="game-reviews__avatar">
                <div class="game-reviews__reviewer-details">
                    <span class="game-reviews__reviewer-name">Viezh Robert</span>
                    <span class="game-reviews__reviewer-location">Warsaw, Poland</span>
                </div>
                <div class="game-reviews__rating">
                    <span class="game-reviews__rating-score">4.5</span>
                    <img src="/icon/star-filled.svg" alt="Star" class="game-reviews__star">
                </div>
            </div>
            <p class="game-reviews__text">
                Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            </p>
        </article>
        <article class="game-reviews__card">
            <div class="game-reviews__reviewer">
                <img src="/img/avatar.png" alt="Reviewer" class="game-reviews__avatar">
                <div class="game-reviews__reviewer-details">
                    <span class="game-reviews__reviewer-name">Viezh Robert</span>
                    <span class="game-reviews__reviewer-location">Warsaw, Poland</span>
                </div>
                <div class="game-reviews__rating">
                    <span class="game-reviews__rating-score">4.5</span>
                    <img src="/icon/star-filled.svg" alt="Star" class="game-reviews__star">
                </div>
            </div>
            <p class="game-reviews__text">
                Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            </p>
        </article>
    </div>
    <div class="game-reviews__navigation">
        <button class="game-reviews__nav-button game-reviews__prev">
            <img src="/icon/prev.svg" alt="Previous">
        </button>
        <div class="game-reviews__indicators">
            <span class="game-reviews__indicator active"></span>
            <span class="game-reviews__indicator"></span>
            <span class="game-reviews__indicator"></span>
            <span class="game-reviews__indicator"></span>
        </div>
        <button class="game-reviews__nav-button game-reviews__next">
            <img src="/icon/next.svg" alt="Next">
        </button>
    </div>
</section>



<!-- Секция FAQ -->
<section class="faq">
    <h2 class="faq__title">Часто задаваемые вопросы</h2>
    <p class="faq__description">Ответы на популярные вопросы о платформе.</p>
    <div class="faq__items">
        @foreach (var faq in new[] {
            new { Question = "Как зарегистрироваться?", Answer = "Нажмите 'Регистрация' вверху, заполните поля и подтвердите email по ссылке." },
            new { Question = "Как найти игру?", Answer = "Используйте строку поиска или фильтры по категориям и рейтингу." },
            new { Question = "Платформа бесплатна?", Answer = "Да, базовый доступ бесплатен, с возможностью дополнительных функций." }
        })
        {
            <div class="faq__item">
                <div class="faq__question">
                    <h3 class="faq__question-title">@faq.Question</h3>
                    <img src="/icon/chevron-down.svg" alt="Развернуть" class="faq__icon" />
                </div>
                <p class="faq__answer">@faq.Answer</p>
            </div>
        }
    </div>
    <a asp-controller="Support" asp-action="Index" class="faq__button">Задать вопрос</a>
</section>

<!-- Модальное окно для отзывов -->
<div class="review-modal" style="display: none;">
    <div class="review-modal__content">
        <h2 class="review-modal__title">Оставить отзыв</h2>
        <form class="review-modal__form" asp-controller="Reviews" asp-action="Submit">
            <div class="review-modal__field">
                <label class="review-modal__label">Игра</label>
                <select class="review-modal__select" name="gameId">
                    @foreach (var game in Model)
                    {
                        <option value="@game.Id">@game.Title</option>
                    }
                </select>
            </div>
            <div class="review-modal__field">
                <label class="review-modal__label">Рейтинг</label>
                <div class="review-modal__stars">
                    @for (int i = 1; i <= 5; i++)
                    {
                        <img src="/icon/star-empty.svg" alt="Star" class="star" data-rating="@i" />
                    }
                </div>
            </div>
            <div class="review-modal__field">
                <label class="review-modal__label">Ваш отзыв</label>
                <textarea class="review-modal__textarea" name="comment" placeholder="Опишите ваш опыт..."></textarea>
            </div>
            <div class="review-modal__actions">
                <button type="button" class="review-modal__close user-added-games__button user-added-games__button--secondary">Закрыть</button>
                <button type="submit" class="review-modal__button user-added-games__button">Отправить</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script src="/js/carousel.js"></script>
    <script src="/js/dropdown.js"></script>
    <script src="/js/review-modal.js"></script>
}